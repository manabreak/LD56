[gd_scene load_steps=18 format=4 uid="uid://bs1i616j1mmav"]

[ext_resource type="PackedScene" uid="uid://dnb207x0r6ato" path="res://firefly.tscn" id="1_io6wl"]
[ext_resource type="Script" path="res://Swarm.gd" id="1_lhv8e"]
[ext_resource type="Texture2D" uid="uid://btduh77xobnk3" path="res://icon.svg" id="2_6hyar"]
[ext_resource type="PackedScene" uid="uid://biyud1g7sb08r" path="res://components/InputComponent.tscn" id="4_sywke"]
[ext_resource type="Script" path="res://FlyCollector.gd" id="5_a1pm1"]
[ext_resource type="TileSet" uid="uid://bcl4mu05iw3lm" path="res://assets/tileset.tres" id="5_lawpy"]
[ext_resource type="Script" path="res://SwarmingTarget.gd" id="6_by5c0"]
[ext_resource type="Texture2D" uid="uid://3qwwp6avlgc7" path="res://assets/halo_256.png" id="6_epjh5"]
[ext_resource type="Script" path="res://HaloSpotter.gd" id="6_ppsek"]
[ext_resource type="Script" path="res://BlockingTiles.gd" id="6_r0bx5"]
[ext_resource type="Texture2D" uid="uid://7jqw1t4rq0tx" path="res://assets/path3.png" id="7_m0dfc"]
[ext_resource type="Script" path="res://TargetIndicatorLight.gd" id="8_m557f"]

[sub_resource type="CircleShape2D" id="CircleShape2D_j3nqc"]
radius = 16.0

[sub_resource type="CircleShape2D" id="CircleShape2D_vlj0h"]
radius = 96.0

[sub_resource type="CircleShape2D" id="CircleShape2D_6r75k"]
radius = 192.0

[sub_resource type="CircleShape2D" id="CircleShape2D_3l121"]
radius = 18.0

[sub_resource type="CircleShape2D" id="CircleShape2D_cjs11"]
radius = 18.0

[node name="Root" type="Node2D"]

[node name="Swarm" type="RigidBody2D" parent="." node_paths=PackedStringArray("swarming_targets")]
position = Vector2(171, -112)
gravity_scale = 0.0
script = ExtResource("1_lhv8e")
swarming_targets = NodePath("../SwarmingTargets")

[node name="Sprite2D" type="Sprite2D" parent="Swarm"]
visible = false
texture = ExtResource("2_6hyar")

[node name="Firefly" parent="Swarm" instance=ExtResource("1_io6wl")]
position = Vector2(-12, -18)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Swarm"]
shape = SubResource("CircleShape2D_j3nqc")

[node name="InputComponent" parent="Swarm" instance=ExtResource("4_sywke")]

[node name="Camera2D" type="Camera2D" parent="Swarm"]
zoom = Vector2(1.5, 1.5)
process_callback = 0
limit_left = 0
limit_bottom = 0
limit_smoothed = true
position_smoothing_enabled = true
position_smoothing_speed = 2.0

[node name="FlyCollector" type="Area2D" parent="Swarm"]
script = ExtResource("5_a1pm1")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Swarm/FlyCollector"]
shape = SubResource("CircleShape2D_vlj0h")

[node name="HaloSpotter" type="Area2D" parent="Swarm"]
script = ExtResource("6_ppsek")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Swarm/HaloSpotter"]
shape = SubResource("CircleShape2D_6r75k")

[node name="Halo" type="Sprite2D" parent="Swarm/HaloSpotter"]
modulate = Color(1, 1, 1, 0)
texture_filter = 4
scale = Vector2(0.76, 0.76)
texture = ExtResource("6_epjh5")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAAAP//AAACAAIAAAAAAP7/AAACAAEAAAABAP7/AAACAAEAAAACAP7/AAACAAEAAAADAP7/AAACAAEAAAAEAP7/AAACAAEAAAAFAP7/AAACAAEAAAAGAP7/AAACAAEAAAAHAP7/AAACAAEAAAAIAP7/AAACAAEAAAAJAP7/AAACAAEAAAAKAP7/AAACAAEAAAALAP7/AAACAAEAAAAMAP7/AAACAAEAAAANAP7/AAACAAEAAAAOAP7/AAACAAEAAAAPAP7/AAACAAEAAAAQAP7/AAACAAEAAAARAP7/AAACAAEAAAASAP7/AAACAAEAAAATAP7/AAACAAEAAAAUAP7/AAACAAEAAAAVAP7/AAACAAEAAAAWAP7/AAACAAEAAAAXAP7/AAACAAEAAAAYAP7/AAACAAEAAAAZAP7/AAACAAEAAAAaAP7/AAACAAEAAAAbAP7/AAACAAEAAAAcAP7/AAACAAEAAAAdAP7/AAACAAEAAAAeAP7/AAACAAEAAAAfAP7/AAACAAEAAAAgAP7/AAACAAEAAAAhAP7/AAACAAEAAAAiAP7/AAACAAEAAAAjAP7/AAACAAEAAAAkAP7/AAACAAEAAAAlAP7/AAACAAEAAAAmAP7/AAACAAEAAAAnAP7/AAACAAEAAAAoAP7/AAACAAEAAAApAP7/AAACAAEAAAABAP//AAACAAIAAAACAP//AAACAAIAAAADAP//AAACAAIAAAAEAP//AAACAAIAAAAFAP//AAACAAIAAAAGAP//AAACAAIAAAAHAP//AAACAAIAAAAIAP//AAACAAIAAAAJAP//AAACAAIAAAAKAP//AAACAAIAAAALAP//AAACAAIAAAAMAP//AAACAAIAAAANAP//AAACAAIAAAAOAP//AAACAAIAAAAPAP//AAACAAIAAAAQAP//AAACAAIAAAARAP//AAACAAIAAAASAP//AAACAAIAAAATAP//AAACAAIAAAAUAP//AAACAAIAAAAVAP//AAACAAIAAAAWAP//AAACAAIAAAAXAP//AAACAAIAAAAYAP//AAACAAIAAAAZAP//AAACAAIAAAAaAP//AAACAAIAAAAbAP//AAACAAIAAAAcAP//AAACAAIAAAAdAP//AAACAAIAAAAeAP//AAACAAIAAAAfAP//AAACAAIAAAAgAP//AAACAAIA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AAAqAP//AAACAAIAAAAiAPL/AAACAAIAAAAiAPH/AAACAAIAAAAjAPH/AAACAAIAAAAkAPH/AAACAAIAAAAlAPH/AAACAAIAAAAtAPL/AAACAAIAAAAtAPH/AAACAAIAAAAsAPH/AAACAAIAAAArAPH/AAACAAIAAAAqAPH/AAACAAIAAAAuAPL/AAACAAIAAAAuAPH/AAACAAIAAAAuAPD/AAACAAIAAAAtAPD/AAACAAIAAAAsAPD/AAACAAIAAAArAPD/AAACAAIAAAAqAPD/AAACAAIAAAAlAPD/AAACAAIAAAAkAPD/AAACAAIAAAAjAPD/AAACAAIAAAAiAPD/AAACAAIAAAAhAPD/AAACAAIAAAAhAPH/AAACAAIAAAAhAPL/AAACAAIAAAAkAP3/AAAJAAkAAAAkAPz/AAAJAAgAAAAkAPv/AAAJAAgAAAAkAPr/AAAJAAgAAAAkAPn/AAAJAAgAAAAkAPj/AAAJAAgAAAAkAPf/AAAJAAgAAAAkAPb/AAAJAAgAAAAlAPP/AAAKAAIAAAAlAPT/AAAKAAMAAAAkAPP/AAAJAAIAAAAkAPT/AAAJAAMAAAAkAPX/AAAJAAQAAAAqAPP/AAAHAAIAAAAqAPT/AAAKAAMAAAAqAPX/AAAHAAQAAAArAPP/AAAIAAIAAAArAPT/AAAIAAMAAAArAPX/AAAIAAMAAAArAPb/AAAIAAMAAAArAPf/AAAIAAMAAAArAPj/AAAIAAMAAAArAPn/AAAIAAMAAAArAPr/AAAIAAMAAAArAPv/AAAIAAMAAAArAPz/AAAIAAMAAAArAP3/AAAIAAQAAAAiAO//AAACAAIAAAAiAO7/AAACAAIAAAAiAO3/AAACAAIAAAAiAOz/AAACAAIAAAAiAOv/AAACAAIAAAAiAOr/AAACAAIAAAAiAOn/AAACAAIAAAAjAOn/AAACAAIAAAAkAOn/AAACAAIAAAAlAOn/AAACAAIAAAAmAOn/AAACAAIAAAAnAOn/AAACAAIAAAAoAOn/AAACAAIAAAApAOn/AAACAAIAAAAqAOn/AAACAAIAAAArAOn/AAACAAIAAAAsAOn/AAACAAIAAAAtAOn/AAACAAIAAAAuAOn/AAACAAIAAAAhAO//AAACAAIAAAAhAO7/AAACAAIAAAAhAO3/AAACAAIAAAAhAOz/AAACAAIAAAAhAOv/AAACAAIAAAAhAOr/AAACAAIAAAAhAOn/AAACAAIAAAAhAOj/AAACAAIAAAAiAOj/AAACAAIAAAAjAOj/AAACAAIAAAAkAOj/AAACAAIAAAAlAOj/AAACAAIAAAArAOj/AAACAAIAAAAsAOj/AAACAAIAAAAtAOj/AAACAAIAAAAuAOj/AAACAAIAAAAvAOj/AAACAAIAAAAqAOj/AAACAAIAAAApAOj/AAACAAIAAAAoAOj/AAACAAIAAAAnAOj/AAACAAIAAAAmAOj/AAACAAIAAAAvAOn/AAACAAIAAAAwAOn/AAACAAIAAAAwAOj/AAACAAIAAAAvAPD/AAACAAIAAAAwAPD/AAACAAIAAAAxAPD/AAACAAIAAAAyAPD/AAACAAIAAAAzAPD/AAACAAIAAAA0APD/AAACAAIAAAA0APH/AAACAAIAAAAzAPH/AAACAAIAAAAyAPH/AAACAAIAAAAxAPH/AAACAAIAAAAwAPH/AAACAAIAAAAvAPH/AAACAAIAAAAxAOn/AAACAAIAAAAxAOj/AAACAAIAAAAyAOj/AAACAAIAAAAzAOj/AAACAAIAAAA0AOj/AAACAAIAAAA0AOn/AAACAAIAAAAzAOn/AAACAAIAAAAyAOn/AAACAAIAAAA1APD/AAACAAIAAAA2APD/AAACAAIAAAA3APD/AAACAAIAAAA4APD/AAACAAIAAAA5APD/AAACAAIAAAA1APH/AAACAAIAAAA2APH/AAACAAIAAAA3APH/AAACAAIAAAA4APH/AAACAAIAAAA5APH/AAACAAIAAAA5AOr/AAACAAIAAAA4AOr/AAACAAIAAAA4AOn/AAACAAIAAAA5AOn/AAACAAIAAAA5AOj/AAACAAIAAAA4AOj/AAACAAIAAAA3AOj/AAACAAIAAAA2AOj/AAACAAIAAAA1AOj/AAACAAIAAAA1AOn/AAACAAIAAAA2AOn/AAACAAIAAAA3AOn/AAACAAIAAAA4AOv/AAACAAIAAAA5AOv/AAACAAIAAAA1AOz/AAAJAAIAAAA1AO3/AAAJAAMAAAA2AOz/AAAKAAIAAAA2AO3/AAAKAAMAAAA1AO7/AAAJAAMAAAA1AO//AAAJAAkAAAA2AOv/AAALAAEAAAA=")
tile_set = ExtResource("5_lawpy")

[node name="Blocker1" type="TileMapLayer" parent="." node_paths=PackedStringArray("targets")]
tile_map_data = PackedByteArray("AAAhAPv/AAACAAYAAAAhAPz/AAACAAYAAAAhAP3/AAACAAYAAAAiAP3/AAACAAYAAAAiAPz/AAACAAYAAAAiAPv/AAACAAYAAAA=")
tile_set = ExtResource("5_lawpy")
script = ExtResource("6_r0bx5")
targets = [NodePath("../SwarmingTargets/SwarmingTarget")]

[node name="Blocker2" type="TileMapLayer" parent="." node_paths=PackedStringArray("targets")]
tile_map_data = PackedByteArray("AAAmAPD/AAACAAYAAAAnAPD/AAACAAYAAAAoAPD/AAACAAYAAAApAPD/AAACAAYAAAApAPH/AAACAAYAAAAoAPH/AAACAAYAAAAnAPH/AAACAAYAAAAmAPH/AAACAAYAAAA=")
tile_set = ExtResource("5_lawpy")
script = ExtResource("6_r0bx5")
targets = [NodePath("../SwarmingTargets/SwarmingTarget2"), NodePath("../SwarmingTargets/SwarmingTarget3")]

[node name="Blocker3" type="TileMapLayer" parent="." node_paths=PackedStringArray("targets")]
tile_map_data = PackedByteArray("AAA4AOz/AAACAAYAAAA4AO3/AAACAAYAAAA4AO7/AAACAAYAAAA4AO//AAACAAYAAAA5AO//AAACAAYAAAA5AO7/AAACAAYAAAA5AO3/AAACAAYAAAA5AOz/AAACAAYAAAA=")
tile_set = ExtResource("5_lawpy")
script = ExtResource("6_r0bx5")
targets = [NodePath("../SwarmingTargets/SwarmingTarget4")]

[node name="SwarmingTargets" type="Node2D" parent="."]

[node name="SwarmingTarget" type="Area2D" parent="SwarmingTargets"]
position = Vector2(975, -272)
script = ExtResource("6_by5c0")
fly_target_max_count = 100

[node name="CollisionShape2D" type="CollisionShape2D" parent="SwarmingTargets/SwarmingTarget"]
position = Vector2(1, 0)
shape = SubResource("CircleShape2D_3l121")

[node name="PointLight2D" type="PointLight2D" parent="SwarmingTargets/SwarmingTarget"]
energy = 5.0
texture = ExtResource("7_m0dfc")
script = ExtResource("8_m557f")

[node name="SwarmingTarget2" type="Area2D" parent="SwarmingTargets"]
position = Vector2(1198, -370)
script = ExtResource("6_by5c0")
fly_target_max_count = 100

[node name="CollisionShape2D" type="CollisionShape2D" parent="SwarmingTargets/SwarmingTarget2"]
position = Vector2(1, 0)
shape = SubResource("CircleShape2D_cjs11")

[node name="PointLight2D" type="PointLight2D" parent="SwarmingTargets/SwarmingTarget2"]
energy = 7.0
texture = ExtResource("7_m0dfc")
script = ExtResource("8_m557f")

[node name="SwarmingTarget3" type="Area2D" parent="SwarmingTargets"]
position = Vector2(1359, -370)
script = ExtResource("6_by5c0")
fly_target_max_count = 100

[node name="CollisionShape2D" type="CollisionShape2D" parent="SwarmingTargets/SwarmingTarget3"]
position = Vector2(1, 0)
shape = SubResource("CircleShape2D_cjs11")

[node name="PointLight2D" type="PointLight2D" parent="SwarmingTargets/SwarmingTarget3"]
energy = 7.0
texture = ExtResource("7_m0dfc")
script = ExtResource("8_m557f")

[node name="SwarmingTarget4" type="Area2D" parent="SwarmingTargets"]
position = Vector2(1743, -594)
script = ExtResource("6_by5c0")
fly_target_min_count = 2
fly_target_max_count = 100

[node name="CollisionShape2D" type="CollisionShape2D" parent="SwarmingTargets/SwarmingTarget4"]
position = Vector2(1, 0)
shape = SubResource("CircleShape2D_cjs11")

[node name="PointLight2D" type="PointLight2D" parent="SwarmingTargets/SwarmingTarget4"]
energy = 7.0
texture = ExtResource("7_m0dfc")
script = ExtResource("8_m557f")

[node name="FreeFlies1" type="Node2D" parent="."]
position = Vector2(628, -244)

[node name="Firefly" parent="FreeFlies1" instance=ExtResource("1_io6wl")]
free_fly = true

[node name="FreeFlies2" type="Node2D" parent="."]
position = Vector2(1283, -142)

[node name="Firefly" parent="FreeFlies2" instance=ExtResource("1_io6wl")]
free_fly = true

[node name="CanvasModulate" type="CanvasModulate" parent="."]
visible = false
color = Color(0.192865, 0.251178, 0.313545, 1)

[connection signal="area_entered" from="Swarm/FlyCollector" to="Swarm/FlyCollector" method="_on_area_entered"]
[connection signal="fly_aqcuired" from="Swarm/FlyCollector" to="Swarm/HaloSpotter" method="_fly_aqcuired"]
[connection signal="area_entered" from="Swarm/HaloSpotter" to="Swarm/HaloSpotter" method="_on_area_entered"]
[connection signal="area_exited" from="Swarm/HaloSpotter" to="Swarm/HaloSpotter" method="_on_area_exited"]
